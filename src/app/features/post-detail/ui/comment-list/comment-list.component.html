<app-comment-form
  [postId]="postId()!"
  [currentUser]="currentUser"
  (addComment)="addComment($event)"
></app-comment-form>

<div class="relative px-3 py-2 flex flex-row justify-between bg-white">
  Comments
  <app-comments-filter
    class="absolute right-4 z-50"
    [comments]="comments()"
    (filteredComments)="updateComments($event)"
  ></app-comments-filter>
</div>

<!-- Displaying root comments -->
<div class="bg-white overflow-hidden">
  <ul class="divide-y divide-gray-200 border-t border-gray-200 mt-2 list-none">
    <!-- Loop through root (main) comments -->
    <li class="pt-2 pl-4 relative">
      @for(comment of comments(); track comment.id) {
      <div [ngClass]="{ 'bg-gray-100': isNewComment(comment) }">
        <app-comment
          [postId]="postId()!"
          [comment]="comment"
          [selectedCommentId]="selectedCommentId"
          [currentUser]="currentUser()"
          (deleteComment)="deleteComment($event)"
          (addReply)="addReply($event)"
          (toggleMenu)="onChildToggleMenu($event)"
        ></app-comment>
      </div>
      }
    </li>
  </ul>
</div>
